<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>StreamingAead (Tink Cryptography Library for Android)</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="StreamingAead (Tink Cryptography Library for Android)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/StreamingAead.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/google/crypto/tink/Registry.html" title="class in com.google.crypto.tink"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/google/crypto/tink/StreamingAead.html" target="_top">Frames</a></li>
<li><a href="StreamingAead.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.google.crypto.tink</div>
<h2 title="Interface StreamingAead" class="title">Interface StreamingAead</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../com/google/crypto/tink/subtle/AesCtrHmacStreaming.html" title="class in com.google.crypto.tink.subtle">AesCtrHmacStreaming</a>, <a href="../../../../com/google/crypto/tink/subtle/AesGcmHkdfStreaming.html" title="class in com.google.crypto.tink.subtle">AesGcmHkdfStreaming</a></dd>
</dl>
<hr>
<br>
<pre><a href="../../../../com/google/crypto/tink/annotations/Alpha.html" title="annotation in com.google.crypto.tink.annotations">@Alpha</a>
public interface <span class="typeNameLabel">StreamingAead</span></pre>
<div class="block">An interface for streaming authenticated encryption with additional data.

 <p>Streaming encryption is typically used for encrypting large plaintexts such as large files.
 Tink may eventually contain multiple interfaces for streaming encryption depending on the
 supported properties. This interface supports a streaming interface for symmetric encryption with
 authentication. The underlying encryption modes are selected so that partial plaintext can be
 obtained fast by decrypting and authenticating just part of the ciphertext.

 <pre>
 Security:
 =========
 Instances of StreamingAead must follow the OAE2 definition as proposed in the paper
 "Online Authenticated-Encryption and its Nonce-Reuse Misuse-Resistance" by Hoang, Reyhanitabar,
 Rogaway and VizÃ¡r https://eprint.iacr.org/2015/189.pdf

 Restrictions:
 =============
 Encryption must be done in one session. There is no possibility to modify an existing
 ciphertext or append to it (other than reencrypt the whold file again). One reason
 for this restriction is the use of AES-GCM as one cipher to implement this interface.
 If single segments are modified then this is equivalent to reusing the same IV twice, but
 reusing an IV twice leaks an AES-GCM key. Another reason is that implementations of this
 interface have no protection against roll-back attacks: an attacker can always try to restore
 a previous version of the file without detection.

 Blocking vs non-blocking I/O
 ============================
 Channels can be in blocking (i.e. always waits untile the requrested number of bytes have been
 processed) or non-blocking mode.
 If the channel provided to the streaming encryption is in blocking mode then encryption and
 decryption have the same property. That is encryption always processes all the plaintext passed
 in and waits until complete segments have been written to the ciphertext channel. Similarly,
 decryption blocks until sufficiently many bytes have been read from the ciphertext channel until
 all the requested plaintext has been decrypted and authenticated, an IOException occurred, or the
 end of the plaintext has been reached.

 If the channel provided to the streaming encryption is in non-blocking mode, then encryption and
 decryption are also non-blocking. Since encryption and decryption is done in segments it is
 possible that for example a call attempting to read() returns no plaintext at all even if
 partial ciphertext was read from the underlying channel.

 Sample encryption:
 ==================

 StreamingAead s = ...
 java.nio.channels.FileChannel ct =
     FileChannel.open(path,
                      java.nio.file.StandardOpenOption.CREATE,
                      java.nio.file.StandardOpenOption.WRITE);
 byte[] aad = ...
 WritableByteChannel chan = s.newEncryptingChannel(ct, aad);
 while ( ... ) {
   int r = chan.write(buffer);
   ...
 }
 chan.close();

 Sample full decryption:
 =======================
 StreamingAead s = ...
 java.nio.channels.FileChannel ct =
     FileChannel.open(path, java.nio.file.StandardOpenOption.READ);
 byte[] aad = ...
 SeekableByteChannel chan = s.newDecryptingChannel(ct, aad);
 int chunkSize = ...
 ByteBuffer buffer = ByteBuffer.allocate(chunkSize);
 do {
   buffer.clear();
   int cnt = chan.read(buffer);
   if (cnt > 0) {
     // Process cnt bytes of plaintext
   } else if (read == -1) {
     // End of plaintext detected
     break;
   } else if (read == 0) {
     // No ciphertext is available at the moment.
   }
 }
 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/ReadableByteChannel.html?is-external=true" title="class or interface in java.nio.channels">ReadableByteChannel</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/google/crypto/tink/StreamingAead.html#newDecryptingChannel-java.nio.channels.ReadableByteChannel-byte:A-">newDecryptingChannel</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/ReadableByteChannel.html?is-external=true" title="class or interface in java.nio.channels">ReadableByteChannel</a>&nbsp;ciphertextChannel,
                    byte[]&nbsp;associatedData)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/WritableByteChannel.html?is-external=true" title="class or interface in java.nio.channels">WritableByteChannel</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/google/crypto/tink/StreamingAead.html#newEncryptingChannel-java.nio.channels.WritableByteChannel-byte:A-">newEncryptingChannel</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/WritableByteChannel.html?is-external=true" title="class or interface in java.nio.channels">WritableByteChannel</a>&nbsp;ciphertextDestination,
                    byte[]&nbsp;associatedData)</code>
<div class="block">Returns a WritableByteChannel for plaintext.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/SeekableByteChannel.html?is-external=true" title="class or interface in java.nio.channels">SeekableByteChannel</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/google/crypto/tink/StreamingAead.html#newSeekableDecryptingChannel-java.nio.channels.SeekableByteChannel-byte:A-">newSeekableDecryptingChannel</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/SeekableByteChannel.html?is-external=true" title="class or interface in java.nio.channels">SeekableByteChannel</a>&nbsp;ciphertextSource,
                            byte[]&nbsp;associatedData)</code>
<div class="block">Returns a SeekableByteChannel that allows to access the plaintext.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="newEncryptingChannel-java.nio.channels.WritableByteChannel-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newEncryptingChannel</h4>
<pre><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/WritableByteChannel.html?is-external=true" title="class or interface in java.nio.channels">WritableByteChannel</a>&nbsp;newEncryptingChannel(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/WritableByteChannel.html?is-external=true" title="class or interface in java.nio.channels">WritableByteChannel</a>&nbsp;ciphertextDestination,
                                         byte[]&nbsp;associatedData)
                                  throws <a href="http://docs.oracle.com/javase/7/docs/api/java/security/GeneralSecurityException.html?is-external=true" title="class or interface in java.security">GeneralSecurityException</a>,
                                         <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Returns a WritableByteChannel for plaintext.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ciphertextDestination</code> - the channel to which the ciphertext is written.</dd>
<dd><code>associatedData</code> - data associated with the plaintext. This data is authenticated but not
     encrypted. It must be passed into the decryption.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/security/GeneralSecurityException.html?is-external=true" title="class or interface in java.security">GeneralSecurityException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="newSeekableDecryptingChannel-java.nio.channels.SeekableByteChannel-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newSeekableDecryptingChannel</h4>
<pre><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/SeekableByteChannel.html?is-external=true" title="class or interface in java.nio.channels">SeekableByteChannel</a>&nbsp;newSeekableDecryptingChannel(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/SeekableByteChannel.html?is-external=true" title="class or interface in java.nio.channels">SeekableByteChannel</a>&nbsp;ciphertextSource,
                                                 byte[]&nbsp;associatedData)
                                          throws <a href="http://docs.oracle.com/javase/7/docs/api/java/security/GeneralSecurityException.html?is-external=true" title="class or interface in java.security">GeneralSecurityException</a>,
                                                 <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Returns a SeekableByteChannel that allows to access the plaintext.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ciphertextSource</code> - the ciphertext</dd>
<dd><code>associatedData</code> - the data associated with the ciphertext.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a SeekableByteChannel that allows random read access to the plaintext. The following
     methods of SeekableByteChannel are implemented:
     <ul>
       <li><code>long position()</code> Returns the channel's position in the plaintext.
       <li><code>SeekableByteChannel  position(long newPosition)</code> Sets the channel's
           position. Setting the position to a value greater than the plaintext size is legal. A
           later attempt to read byte will immediately return an end-of-file indication.
       <li><code>int read(ByteBuffer dst)</code> Bytes are read starting at the channel's
           position, and then the position is updated with the number of bytes actually read.
           All bytes returned have been authenticated. If the end of the stream has been reached
           -1 is returned. A result of -1 is authenticated (e.g. by checking the MAC of the last
           ciphertext chunk.) Throws java.io.IOException if a MAC verification failed. read
           attempt to fill dst, but may return less bytes than requested if reads to
           ciphertextSource do not return the requested number of bytes or if the plaintext
           ended. TODO(bleichen): Should we extend the interface with read(ByteBuffer dst, long
           position) to avoid race conditions?
       <li><code>long size()</code> Returns the size of the plaintext. (TODO: Decide whether the
           result should be authenticated)
       <li><code>SeekableByteChannel truncate(long size)</code> throws
           NonWritableChannelException because the channel is read-only.
       <li><code>int write(ByteBuffer src)</code> throws NonWritableChannelException because the
           channel is read-only.
       <li><code>close()</code> closes the channel
       <li><code>isOpen()</code>
     </ul></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/security/GeneralSecurityException.html?is-external=true" title="class or interface in java.security">GeneralSecurityException</a></code> - if the header of the ciphertext is corrupt or if the
     associatedData is not correct.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if an IOException occurred while reading from ciphertextDestination.</dd>
</dl>
</li>
</ul>
<a name="newDecryptingChannel-java.nio.channels.ReadableByteChannel-byte:A-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>newDecryptingChannel</h4>
<pre><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/ReadableByteChannel.html?is-external=true" title="class or interface in java.nio.channels">ReadableByteChannel</a>&nbsp;newDecryptingChannel(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/ReadableByteChannel.html?is-external=true" title="class or interface in java.nio.channels">ReadableByteChannel</a>&nbsp;ciphertextChannel,
                                         byte[]&nbsp;associatedData)
                                  throws <a href="http://docs.oracle.com/javase/7/docs/api/java/security/GeneralSecurityException.html?is-external=true" title="class or interface in java.security">GeneralSecurityException</a>,
                                         <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/security/GeneralSecurityException.html?is-external=true" title="class or interface in java.security">GeneralSecurityException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/StreamingAead.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/google/crypto/tink/Registry.html" title="class in com.google.crypto.tink"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/google/crypto/tink/StreamingAead.html" target="_top">Frames</a></li>
<li><a href="StreamingAead.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><div id="footer">               <div id="footerlogo" style="float:left">                 <img src="http://www.google.com/images/art.gif" alt="Google colored balls">               </div>               <div id="copyright" style="float:left">                 <p>&copy; Google -                   <a href="http://www.google.com/privacy.html">Privacy Policy</a> -                   <a href="http://www.google.com/terms_of_service.html">Terms and Conditions</a> -                   <a href="http://www.google.com/about.html">About Google</a>                 </p>               </div></small></p>
</body>
</html>
